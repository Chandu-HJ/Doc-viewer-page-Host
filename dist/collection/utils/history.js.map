{"version":3,"file":"history.js","sourceRoot":"","sources":["../../src/utils/history.ts"],"names":[],"mappings":"AAAA,uBAAuB;AAEvB,MAAM,OAAO,cAAc;IACjB,IAAI,GAAQ,EAAE,CAAC;IACf,MAAM,GAAQ,EAAE,CAAC;IAEjB,KAAK,CAAC,KAAQ;QACpB,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;IAC3C,CAAC;IAED,SAAS,CAAC,KAAQ;QAChB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;QAClC,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,mBAAmB;IACvC,CAAC;IAED,IAAI,CAAC,OAAU;QACb,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC;YAAE,OAAO,IAAI,CAAC;QACxC,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,EAAG,CAAC;QAC9B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;QACtC,OAAO,IAAI,CAAC;IACd,CAAC;IAED,IAAI,CAAC,OAAU;QACb,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,KAAK,CAAC;YAAE,OAAO,IAAI,CAAC;QAC1C,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,EAAG,CAAC;QAChC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;QACpC,OAAO,IAAI,CAAC;IACd,CAAC;CACF","sourcesContent":["// src/utils/history.ts\r\n\r\nexport class HistoryManager<T> {\r\n  private past: T[] = [];\r\n  private future: T[] = [];\r\n\r\n  private clone(state: T): T {\r\n    return JSON.parse(JSON.stringify(state));\r\n  }\r\n\r\n  pushState(state: T) {\r\n    this.past.push(this.clone(state));\r\n    this.future = []; // clear redo stack\r\n  }\r\n\r\n  undo(current: T): T | null {\r\n    if (this.past.length === 0) return null;\r\n    const prev = this.past.pop()!;\r\n    this.future.push(this.clone(current));\r\n    return prev;\r\n  }\r\n\r\n  redo(current: T): T | null {\r\n    if (this.future.length === 0) return null;\r\n    const next = this.future.pop()!;\r\n    this.past.push(this.clone(current));\r\n    return next;\r\n  }\r\n}\r\n"]}