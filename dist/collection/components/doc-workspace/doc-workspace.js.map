{"version":3,"file":"doc-workspace.js","sourceRoot":"","sources":["../../../src/components/doc-workspace/doc-workspace.tsx"],"names":[],"mappings":"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","sourcesContent":["// src/components/doc-workspace/doc-workspace.tsx\r\nimport { Component, h, Prop, State } from '@stencil/core';\r\nimport type { FileType } from '../doc-viewer/doc-viewer';\r\n\r\ninterface WorkspaceFile {\r\n  id: string;\r\n  name: string;\r\n  url: string;\r\n  fileType: FileType;\r\n}\r\n\r\n@Component({\r\n  tag: 'doc-workspace',\r\n  styleUrl: 'doc-workspace.css',\r\n  shadow: false,\r\n})\r\nexport class DocWorkspace {\r\n  @Prop() scale: number = 1.2;\r\n  @State() files: WorkspaceFile[] = [];\r\n  @State() activeId: string | null = null;\r\n\r\n  // ‚≠ê Global theme state (affects viewer + workspace)\r\n  @State() theme: 'light' | 'dark' | 'sepia' = 'light';\r\n\r\n  private fileInput?: HTMLInputElement;\r\n\r\n  // ------------------------------------------------------------\r\n  // FILE UPLOAD\r\n  // ------------------------------------------------------------\r\n  private onFileSelected = (e: Event) => {\r\n    const input = e.target as HTMLInputElement;\r\n    const file = input.files?.[0];\r\n    if (!file) return;\r\n\r\n    const ext = file.name.toLowerCase();\r\n    const id = Date.now().toString();\r\n\r\n    let fileType: FileType = 'text';\r\n    if (ext.endsWith('.pdf')) fileType = 'pdf';\r\n    else if (ext.match(/\\.(png|jpg|jpeg|gif|bmp|webp)$/)) fileType = 'image';\r\n\r\n    const url = URL.createObjectURL(file);\r\n\r\n    this.files = [\r\n      ...this.files,\r\n      {\r\n        id,\r\n        name: file.name,\r\n        url,\r\n        fileType,\r\n      },\r\n    ];\r\n\r\n    this.activeId = id;\r\n    input.value = '';\r\n  };\r\n\r\n  // ------------------------------------------------------------\r\n  // CLOSE TAB\r\n  // ------------------------------------------------------------\r\n  private closeFile(id: string) {\r\n    this.files = this.files.filter((f) => f.id !== id);\r\n\r\n    if (this.activeId === id) {\r\n      this.activeId = this.files.length ? this.files[0].id : null;\r\n    }\r\n  }\r\n\r\n  // ------------------------------------------------------------\r\n  // RENDER\r\n  // ------------------------------------------------------------\r\n  render() {\r\n    const activeFile = this.files.find((f) => f.id === this.activeId);\r\n\r\n    return (\r\n      <div class={`workspace-container theme-${this.theme}`}>\r\n\r\n        {/* ------------------------ WORKSPACE TOOLBAR ------------------------- */}\r\n        <div class=\"workspace-toolbar\">\r\n          <button class=\"open-btn\" onClick={() => this.fileInput?.click()}>\r\n            üìÇ Open File\r\n          </button>\r\n\r\n          <input\r\n            type=\"file\"\r\n            accept=\".pdf,.png,.jpg,.jpeg,.gif,.bmp,.webp,.txt,.md\"\r\n            style={{ display: 'none' }}\r\n            ref={(el) => (this.fileInput = el as HTMLInputElement)}\r\n            onChange={this.onFileSelected}\r\n          />\r\n\r\n          <div class=\"toolbar-spacer\"></div>\r\n\r\n          {/* ‚≠ê THEME SWITCHER */}\r\n          <label class=\"theme-label\">Theme:</label>\r\n          <select\r\n            class=\"theme-select\"\r\n            onChange={(e: any) => {\r\n              this.theme = e.target.value;\r\n            }}\r\n          >\r\n            <option value=\"light\" selected={this.theme === 'light'}>\r\n              Light\r\n            </option>\r\n            <option value=\"dark\" selected={this.theme === 'dark'}>\r\n              Dark\r\n            </option>\r\n            <option value=\"sepia\" selected={this.theme === 'sepia'}>\r\n              Sepia\r\n            </option>\r\n          </select>\r\n        </div>\r\n\r\n        {/* ------------------------ TABS ------------------------- */}\r\n        <div class=\"workspace-tabs\">\r\n          {this.files.map((file) => (\r\n            <div\r\n              class={{\r\n                tab: true,\r\n                active: file.id === this.activeId,\r\n              }}\r\n              onClick={() => (this.activeId = file.id)}\r\n            >\r\n              {file.name}\r\n\r\n              <span\r\n                class=\"close-x\"\r\n                onClick={(ev) => {\r\n                  ev.stopPropagation();\r\n                  this.closeFile(file.id);\r\n                }}\r\n              >\r\n                ‚úñ\r\n              </span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* ------------------------ VIEWER PANEL ------------------------- */}\r\n        <div class=\"workspace-viewer\">\r\n          {activeFile ? (\r\n            <doc-viewer\r\n              key={activeFile.id}\r\n              src={activeFile.url}\r\n              fileType={activeFile.fileType}\r\n              scale={this.scale}\r\n              theme={this.theme}      // ‚≠ê PASS THEME TO VIEWER\r\n              mode=\"editor\"           // default for workspace\r\n            ></doc-viewer>\r\n          ) : (\r\n            <div class=\"empty\">\r\n              No file opened. Click <b>Open File</b>.\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]}